---
title: "project 4"
author: "Nicholas Chung"
date: "11/23/2019"
output: 
  html_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# load packages
library(rjson)
library(tidyr)
library(dplyr)
library(jsonlite)
library(httr)
library(XML)
```

# patent data collection

## USPTO
Patent grant full text data (no images) (JAN 1976 - present) (1976 - 2001 Automated Patent System (APS) format is Green Book)
Contains (JAN 2002 - present) the full text of each patent grant issued weekly (Tuesdays) (excludes images/drawings and reexaminations). The file format is eXtensible Markup Language (XML) in accordance with the Patent Grant International Common Element (ICE) Document Type Definition (DTD).

# XML
```{r}
# load data from xml file
#uspto.xml <- xmlParse("data/ipg191119.xml")
#uspto.xml <- xmlToDataFrame(uspto.xml, stringsAsFactors = FALSE)
#uspto.xml
lines <- readLines("data/ipg191119.xml")
start <- grep('<?xml version="1.0" encoding="UTF-8"?>', lines, fixed = T)
end <- c(start[-1]-1, length(lines))
get.xml <- function(i) {
  txt <- paste(lines[start[i]:end[i]], collapse = "\n")
  #print(i)
  xmlTreeParse(txt, asText = T)
}
docs <- lapply(1:10, get.xml)
#class(docs[[1]])
docs[[1]]
#sapply(docs,function(doc) xmlValue(doc["//invention-title"][[1]]))
```

## NASA
this dataset shows information pertaining to NASA held and pending patents.

# API
```{r}
# 
#https://data.nasa.gov/resource/gquh-watm.json
url <- "https://data.nasa.gov/resource/nasa-patents.json"
raw.result <- GET(url = url)
raw.result
```

# Observations
